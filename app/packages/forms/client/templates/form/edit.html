<template name="EditForm">

  <div class="box">
    <div class="box-header with-border">
      <h3 class="box-title">Edit form</h3>
      {{#if (can "update" form)}}
        <span style="float:right">{{> breadcrumb}}</span>
        <span style="float:right">{{> quickRemoveButton collection=getCol _id=form._id class="btn btn-danger"}}</span>

      {{/if}}
    </div>
    <div class="box-body table-responsive">

  {{#if (can "update" form)}}
    {{> quickForm collection=getCol doc=form id="editFormForm" type="update" omitFields="createdBy" buttonContent="Update"}}
  {{/if}}
  <hr>
  <h4>Fields</h4>
  {{#linkTo route="insertField" parent=form._id}}<i class="fa fa-plus"></i> New field{{/linkTo}}

  <table id="items" class="table table-hover">
    <thead>
      <tr>
        <th>type</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
    {{#each fields}}
      <tr data-id='{{_id}}' data-listposition='{{listposition}}'>
        <td><i class="fa fa-sort pull-right"></i></td>
        <td>{{name}}</td>
        <td>{{type}}</td>
        <td>
          {{#linkTo route='editField' form=(formId)}}
          <button class="btn btn-info" type="button">Edit</button>
          {{/linkTo}}
        </td>
      </tr>
    {{/each}}
    </tbody>
  </table>
</div>
</div>
</template>
